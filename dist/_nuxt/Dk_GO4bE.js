import{_ as x}from"./spp0zfZc.js";import{g as y,m as F,r,n as B,c,a as o,G as k,b as I,w as S,t as l,d as T,l as C,p as D,F as N,s as b,o as n}from"./a-2ymmio.js";import{_ as V}from"./yRelOyLE.js";import{_ as R,a as j}from"./D1wNcXwR.js";import{a as G}from"./BtuGy7By.js";import"./BbCOxZKf.js";import"./_d1bhYXs.js";const M={class:"GoBackBody"},U={class:"PageProductBody"},A={class:"PageProductContent"},E={class:"PageImageProduct"},L=["src"],O={key:1,style:{width:"100%",height:"100%","object-fit":"cover"},src:V},q={class:"PageProductRightBlock"},$={class:"PageProductText"},z={class:"PageProductName"},H={class:"PagePriceForOne"},J={class:"PageVolumeSelection"},K={class:"PageProductDescriptionBlock"},Q={class:"PageProductDescription"},at=y({__name:"[id]",setup(W){const m=e=>new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(e).replace(/\s/g,"."),p=F(),v=b(),g=p.params.id,s=r(null),a=r(""),i=r(0),d=r(""),P=async()=>{try{const e=await fetch(`http://localhost:5000/api/products/${g}`);if(!e.ok)throw new Error("Ошибка при получении товара");const t=await e.json();a.value=t["product-name"],i.value=t["product-price"],d.value=t["product-description"],s.value=t["product-image"]}catch(e){console.error("Ошибка при загрузке данных товара:",e),await v.push("/")}},_=async()=>{const e=h();if(!a.value||!i.value||!s.value){console.error("Данные о товаре не загружены");return}try{await G.post("http://localhost:5000/api/baskets/add",{userId:e,"items-product-name":a.value,"items-price":i.value,"items-product-image":s.value,"items-quantity":1}),console.log("Товар добавлен в корзину:",a.value)}catch(t){console.error("Ошибка при добавлении товара в корзину:",t)}},h=()=>{let e=localStorage.getItem("userId");return e||(e=Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("userId",e)),e};B(()=>{P()});const u=r("500мл");return(e,t)=>{const f=x;return n(),c(N,null,[t[4]||(t[4]=o("meta",{charset:"utf-8"},null,-1)),t[5]||(t[5]=o("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1)),t[6]||(t[6]=o("title",null,"Авто-химия",-1)),t[7]||(t[7]=o("link",{rel:"icon",href:"@/image/IcoL.ico",type:"image/x-icon"},null,-1)),o("div",M,[I(f,{to:"/"},{default:S(()=>t[1]||(t[1]=[o("a",{class:"BtnGoBack"},"<- назад",-1)])),_:1})]),o("div",U,[o("div",A,[o("div",E,[s.value?(n(),c("img",{key:0,style:{width:"100%",height:"100%","object-fit":"cover"},src:s.value},null,8,L)):(n(),c("img",O))]),o("div",q,[o("div",$,[o("div",z,l(a.value),1),o("div",H,l(m(i.value))+" р/1шт",1),o("div",J,[t[3]||(t[3]=T(" Объем: ")),C(o("select",{"onUpdate:modelValue":t[0]||(t[0]=w=>u.value=w),class:"custom-select"},t[2]||(t[2]=[o("option",{value:"500мл"},"500мл",-1),o("option",{value:"300мл"},"300мл",-1)]),512),[[D,u.value]])]),o("div",{class:"PageButtonProductAdd"},[o("button",{class:"PageBtnProductAdd",onClick:_},"Добавить в корзину")])]),o("div",K,[o("div",Q,l(d.value),1)])])])]),t[8]||(t[8]=k('<div class="PageFooterBody"><div class="PageFooterBodyContent"><div class="PageFooterContacts"><h2 class="FooterTitle">Краснодар:</h2><div class="PageFooterTextContent"><p class="FooterText">+7(928)660-97-79</p><p class="FooterText">+7(928)227-55-15</p><p class="FooterText">+7(967)660-09-51</p><p class="FooterText">+7(967)660-09-47</p><p class="FooterText gmail">info@himautopro.ru</p></div></div><div class="PageFooterSocial"><div class="PageFooterSocialContent"><div class="PageSocial"><img src="'+R+'" style="width:45px;"><img src="'+j+'" style="width:45px;"></div></div></div></div></div>',1))],64)}}});export{at as default};
