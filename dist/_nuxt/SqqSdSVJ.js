import{_ as we}from"./spp0zfZc.js";import{g as Ce,r as c,z as q,n as k,A as j,y as X,c as i,a as t,k as g,E as ke,G as Y,j as z,d as K,t as u,F as I,q as E,D as G,T as Ie,B as Be,o as l,b as Pe,w as $e}from"./a-2ymmio.js";import{_ as Me,a as Se}from"./D1wNcXwR.js";import{a as v}from"./BtuGy7By.js";import"./BbCOxZKf.js";import"./_d1bhYXs.js";const H=""+new URL("Logo.Dwb7m5aS.jpg",import.meta.url).href,Ne=""+new URL("MainPageImage.DLVszyRh.jpg",import.meta.url).href,Te=""+new URL("scrol.SYC4ZCKH.png",import.meta.url).href,Ae=""+new URL("CancerImage.SRmK37aL.png",import.meta.url).href,Ee={clas:"Navbar"},Fe={class:"Container"},Le={class:"Navbar-Menu"},qe={class:"MainPageInfoBody"},ze={class:"MainPageInfoScrol"},De={class:"MainPageInfo"},Ue={class:"DivInfoButton"},Oe={key:0,class:"CancerBody",style:{transition:"opacity 0.3s ease"}},We={class:"Cancer"},Re={key:0,id:"orderSuccessModal",class:"modal-success"},Qe={class:"modal-success-content"},Ve={class:"modal-success-OrderNumber"},Ze={class:"modal-success-ButtonModal"},je={key:1,id:"modal",class:"modal"},Xe={class:"SliderModal"},Ye={class:"SlidesModal"},Ke={class:"PageModal ActiveModal"},Ge={class:"ContainerModal"},He={class:"ProductImageModal"},Je=["src"],et={class:"InfoProductModal"},tt={class:"ProductNameModal"},st={class:"ProductOneOrderModalBox"},ot={class:"hsixstyle"},at={class:"QuantityProductModal"},nt=["onClick"],lt=["id","value","onInput"],rt=["onClick"],it={class:"ProductSumPrice"},ct={id:"hfivestyle"},dt={class:"DeliteProductModal"},ut=["onClick"],vt={class:"ContactsModal"},mt={class:"NameBox"},pt={class:"EmailBox"},ht={class:"NumberBox"},gt={class:"TotalPrice"},ft={class:"ButtonModal"},yt={key:0,class:"error-message"},_t={key:1,class:"error-message-main"},xt={key:2,class:"error-message-main"},bt={key:3,class:"error-message-main"},wt={class:"CategoriesBody"},Ct={class:"CategoriesCenter"},kt={class:"Categories",id:"section1"},It=["onClick"],Bt={style:{"text-decoration":"none",color:"black"}},Pt={class:"slider"},$t={class:"slides"},Mt={class:"container"},St={class:"ProductPreview"},Nt=["src"],Tt={class:"ProductName"},At={class:"Price"},Et={class:"ProductButton"},Ft=["onClick"],Lt={class:"navigation"},qt=["value","max"],Vt=Ce({__name:"index",setup(zt){const B=c(!1),P=s=>new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(s).replace(/\s/g,"."),$=c(!0),b=c(null),p=c(null),r=c(0),m=c(15),f=c([]),J=c(null),y=c(null),_=c([]),F=c(!1),D=c(null),M=c(null),w=c(null),L=()=>{const s=window.innerWidth;s<=1023?m.value=6:s<=1279?m.value=9:s<=1539?m.value=12:m.value=15},ee=s=>s.replace(/\D/g,"").length!==11?(M.value="Не допустимый формат номера телефона",!1):(M.value=null,!0);q(b,s=>{p.value&&(s?p.value.classList.add("with-error"):p.value.classList.remove("with-error"))}),q(y,s=>{p.value&&(s?p.value.classList.add("with-error"):p.value.classList.remove("with-error"))});const U=async()=>{try{const s=await v.get("http://localhost:5000/api/products");f.value=s.data,console.log("Все товары загружены:",f.value),S(),h()}catch(s){console.error("Ошибка при загрузке всех товаров:",s)}},x=()=>{let s=localStorage.getItem("userId");return s||(s=Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("userId",s)),s},te=async s=>{try{console.log("Запрашиваемые данные по категории:",s);const e=`http://localhost:5000/api/products/category/${s}`;console.log("Запрос по URL:",e);const a=await v.get(e);f.value=a.data,console.log("Товары загружены по категории:",f.value),S()}catch(e){console.error("Ошибка при загрузке товаров по категории:",e)}S(),h()},se=(s,e)=>{if(!s){console.error("categoryId не передан");return}J.value=s,r.value=0,e==="Все"?U():te(s),h()};k(()=>{U()});const C=j(()=>Math.ceil(f.value.length/m.value)),oe=s=>{const e=s*m.value,a=e+m.value;return f.value.slice(e,a)},h=()=>{const s=document.querySelector(".slides"),e=document.querySelectorAll(".page");if(e.length>0){const a=e[0].clientWidth;s.style.transform=`translateX(-${r.value*a}px)`}S(),ae()},S=()=>{const s=document.querySelector(".nav-btn.prev"),e=document.querySelector(".nav-btn.next");s&&e&&(r.value===0?(s.disabled=!0,s.style.backgroundColor="gray"):(s.disabled=!1,s.style.backgroundColor="red"),r.value===C.value-1?(e.disabled=!0,e.style.backgroundColor="gray"):(e.disabled=!1,e.style.backgroundColor="red"))},ae=()=>{const s=document.querySelector(".page-input");s&&(s.value=(r.value+1).toString(),s.style.backgroundColor="")},O=()=>{const s=document.querySelector(".page-input");if(s){const e=parseInt(s.value,10)-1;if(e>=0&&e<C.value){const a=document.querySelector(".slides"),n=document.querySelectorAll(".page")[0].clientWidth,d=Math.abs(r.value-e),Z=Math.min(.5+d*.2,3);a.style.transition=`transform ${Z}s ease-in-out`,r.value=e,a.style.transform=`translateX(-${r.value*n}px)`,h()}else s.style.backgroundColor="#ffcccc"}},W=()=>{const s=document.querySelector(".slides"),a=document.querySelectorAll(".page")[0].clientWidth;s.style.transition="none",s.style.transform=`translateX(-${r.value*a}px)`,setTimeout(()=>{s.style.transition=""},0)},R=s=>{const e=document.querySelector(".slides"),o=document.querySelectorAll(".page")[0].clientWidth;s==="prev"&&r.value>0?r.value-=1:s==="next"&&r.value<C.value-1&&(r.value+=1),e.style.transform=`translateX(-${r.value*o}px)`,h()};k(()=>{L(),window.addEventListener("resize",L)}),X(()=>{window.removeEventListener("resize",L)}),q(m,()=>{h()}),k(()=>{h(),window.addEventListener("resize",W)}),X(()=>{window.removeEventListener("resize",W)});const ne=async s=>{const e=x();try{await v.post("http://localhost:5000/api/baskets/add",{userId:e,"items-product-name":s["product-name"],"items-quantity":1,"items-price":s["product-price"],"items-product-image":s["product-image"]}),N()}catch(a){console.error("Ошибка при добавлении товара в корзину:",a)}},N=async()=>{const s=x();try{const e=await v.get(`http://localhost:5000/api/baskets/${s}`);_.value=e.data.items}catch(e){console.error("Ошибка при получении корзины:",e)}};k(()=>{N()});const T=async(s,e)=>{e<1&&(e=1);const a=x();try{await v.put("http://localhost:5000/api/baskets/update",{userId:a,"items-product-name":s,"items-quantity":e}),N()}catch(o){console.error("Ошибка при обновлении количества товара:",o)}},le=async(s,e)=>{const a=e.target,o=parseInt(a.value,10);if(isNaN(o)||o<1){a.value="1",await T(s,1);return}await T(s,o)},re=async s=>{const e=x();try{await v.delete("http://localhost:5000/api/baskets/remove",{data:{userId:e,"items-product-name":s}}),N()}catch(a){console.error("Ошибка при удалении товара из корзины:",a)}};function A(s){const e=document.getElementById(s);e&&e.scrollIntoView({behavior:"smooth"})}const ie=j(()=>_.value.reduce((s,e)=>s+e["items-price"]*e["items-quantity"],0)),Q=c([]),ce=async()=>{try{const e=await(await fetch("http://localhost:5000/api/categories")).json();Q.value=e}catch(s){console.error("Ошибка при получении категорий:",s)}};k(()=>{ce()});const de=async()=>{const s=x();try{const e=await v.get(`http://localhost:5000/api/orders?userId=${s}`),o=(Array.isArray(e.data)?e.data:[e.data]).find(n=>n["order-status"]==="Не готов");return o?(w.value=`У вас уже есть активный заказ #${o.orderNumber}!`,!1):(w.value=null,!0)}catch(e){return console.error("Ошибка при проверке активного заказа:",e),w.value="Ошибка при проверке активного заказа",!1}},ue=async()=>{if(!await de())return;const e=document.getElementById("NameTextBox").value,a=document.getElementById("EmailTextBox").value,o=document.getElementById("NumberTextBox").value;if(!e||!a||!o){b.value="Пожалуйста, заполните все поля",y.value=null;return}if(!V(a)){y.value="Не допустимый формат электронной почты.";return}if(!ee(o))return;const n=x();try{const d=await v.post("http://localhost:5000/api/orders",{userId:n,items:_.value,"order-name":e,"order-gmail":a,"order-phone":o});D.value=d.data.orderNumber,await v.delete(`http://localhost:5000/api/baskets/${n}`),B.value=!1,_.value=[],F.value=!0}catch(d){console.error("Ошибка при создании заказа:",d),alert("Произошла ошибка при создании заказа")}},V=s=>{const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,a=["gmail.com","mail.ru","yandex.ru","yahoo.com"];if(!e.test(s))return $.value=!1,!1;const o=s.split("@")[1];return a.includes(o)?($.value=!0,!0):($.value=!1,!1)},ve=()=>{b.value=null},me=()=>{y.value=null},pe=s=>{const e=s.target.value;V(e),me(),ve()},he=s=>{const e=s.target,a=e.value;/^[a-zA-Z0-9@.]*$/.test(a)||(e.value=a.replace(/[^a-zA-Z0-9@.]/g,"")),pe(s)},ge=s=>{const e=s.target,a=e.value;/^[a-zA-Zа-яА-Я\s]*$/.test(a)||(e.value=a.replace(/[^a-zA-Zа-яА-Я\s]/g,""))},fe=s=>{const e=(""+s).replace(/\D/g,"");if(e.startsWith("+")){const o=e.match(/^\+(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);if(o){let n="+";return o[1]&&(n+=` (${o[1]}`),o[2]&&(n+=`) ${o[2]}`),o[3]&&(n+=`-${o[3]}`),o[4]&&(n+=`-${o[4]}`),n}}const a=e.match(/^(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);if(a){let o="+";return a[1]&&(o+=`${a[1]}`),a[2]&&(o+=` (${a[2]}`),a[3]&&(o+=`) ${a[3]}`),a[4]&&(o+=`-${a[4]}`),a[5]&&(o+=`-${a[5]}`),o}return"+"},ye=s=>{const e=s.target,a=fe(e.value);e.value=a},_e=s=>{const e=s.target;e.value.startsWith("+")||(e.value="+")},xe=s=>{const e=s.target;e.value==="+"&&(e.value="")},be=s=>{const e=s.target,a=e.value;/^[0-9]*$/.test(a)||(e.value=a.replace(/[^0-9]/g,"")),ye(s)};return(s,e)=>{const a=we;return l(),i(I,null,[e[21]||(e[21]=t("meta",{charset:"utf-8"},null,-1)),e[22]||(e[22]=t("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1)),e[23]||(e[23]=t("title",null,"Авто-химия",-1)),e[24]||(e[24]=t("link",{rel:"icon",href:"../image/IcoL.ico",type:"image/x-icon"},null,-1)),t("nav",Ee,[t("div",Fe,[e[10]||(e[10]=t("a",{href:"/",class:"Navbar-Logo"},[t("img",{src:H,style:{width:"160px",height:"100px"}})],-1)),t("ul",Le,[e[9]||(e[9]=t("li",null,[t("a",{href:"/"},"Главная")],-1)),t("li",null,[t("a",{href:"#section1",onClick:e[0]||(e[0]=z(o=>A("section1"),["prevent"]))},"Магазин")]),t("li",null,[t("a",{href:"#section2",onClick:e[1]||(e[1]=z(o=>A("section2"),["prevent"]))},"О компании")]),t("li",null,[t("a",{class:"LastA",href:"#section3",onClick:e[2]||(e[2]=z(o=>A("section3"),["prevent"]))},"Контакты")])])])]),e[25]||(e[25]=t("div",{class:"DivImage"},[t("img",{src:Ne,style:{width:"100%",height:"100%","object-fit":"cover"}}),t("div",{class:"PageInfoFooter"},[t("img",{src:Te,style:{width:"50px",height:"45px"}})])],-1)),t("div",qe,[t("div",ze,[t("div",De,[e[11]||(e[11]=t("h1",{class:"NameStore"},"Авто-химия",-1)),e[12]||(e[12]=t("div",{class:"InfoStore"},[t("h2",{class:"InfoStoreText"},[K("Автохимия и расходные материалы для ремонта (очистители, смазки, герметики, ахо, укрывочная продукция, метизы и прочее.) "),t("p",{class:"InfoStoreTextTwo"},"Выкупим неликвид с вашего склада на выгодных условиях")])],-1)),t("div",Ue,[t("button",{class:"InfoButton",onClick:e[3]||(e[3]=o=>A("section1"))},"Каталог")])])])]),_.value.length>0?(l(),i("div",Oe,[t("div",We,[t("img",{id:"CancerImage",alt:"",src:Ae,onClick:e[4]||(e[4]=o=>B.value=!0)})])])):g("",!0),(l(),ke(Ie,{to:"body"},[F.value?(l(),i("div",Re,[t("div",Qe,[e[13]||(e[13]=t("div",{class:"modal-success-ModalTitle"},[t("h1",{class:"modal-success-modaltitle"},"Ваш заказ успешно создан!")],-1)),t("div",Ve,[t("p",null,"Номер вашего заказа: #"+u(D.value),1)]),t("div",Ze,[t("button",{id:"modal-success-BtnModal",onClick:e[5]||(e[5]=o=>F.value=!1)},"Закрыть")])])])):g("",!0),B.value?(l(),i("div",je,[t("div",{class:"modal-content",ref_key:"modalContent",ref:p},[t("span",{class:"close",onClick:e[6]||(e[6]=o=>B.value=!1)},"×"),e[19]||(e[19]=t("div",{class:"ModalTitle"},[t("h1",{class:"modaltitle"},"Ваш заказ:")],-1)),t("div",Xe,[t("div",Ye,[t("div",Ke,[t("div",Ge,[(l(!0),i(I,null,E(_.value,(o,n)=>(l(),i("div",{key:o._id,class:"itemModal"},[t("div",He,[t("img",{src:o["items-product-image"],style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Je)]),t("div",et,[t("h4",tt,u(o["items-product-name"]),1),e[14]||(e[14]=t("div",{class:"ProductSizeModalBox"},[t("h5",{class:"hsixstyle"},"ОБЪЕМ: 500мл")],-1)),t("div",st,[t("h5",ot,u(P(o["items-price"]))+"р/шт",1)]),t("div",at,[t("button",{onClick:d=>T(o["items-product-name"],o["items-quantity"]-1),class:"BtnsQuantity"},"-",8,nt),t("input",{type:"number",id:`quantity${n}`,class:"quantitystye",value:o["items-quantity"],onInput:d=>le(o["items-product-name"],d),min:"1"},null,40,lt),t("button",{onClick:d=>T(o["items-product-name"],o["items-quantity"]+1),class:"BtnsQuantity Plus"},"+",8,rt)])]),t("div",it,[t("h4",ct,u(P(o["items-price"]*o["items-quantity"]))+"/Руб.",1)]),t("div",dt,[t("button",{onClick:d=>re(o["items-product-name"]),class:"BtnsDeliteProductModal"},"X",8,ut)])]))),128))])])])]),t("div",vt,[t("div",mt,[e[15]||(e[15]=t("h2",{class:"htwostyle"},"Ваше имя:",-1)),t("input",{id:"NameTextBox",type:"text",placeholder:"",onInput:ge},null,32)]),t("div",pt,[e[16]||(e[16]=t("h2",{class:"htwostyle"},"Ваша почта:",-1)),t("input",{id:"EmailTextBox",type:"text",placeholder:"",onInput:he,class:G({"invalid-email":!$.value})},null,34)]),t("div",ht,[e[17]||(e[17]=t("h2",{class:"htwostyle"},"Ваш телефон:",-1)),t("input",{id:"NumberTextBox",type:"text",placeholder:"+7 (918) 000-00-00",onBlur:xe,onInput:be,onFocus:_e},null,32)])]),t("div",gt,[e[18]||(e[18]=t("h3",{class:"SumModal"},"Сумма:",-1)),t("h3",null,u(P(ie.value))+" р",1)]),t("div",ft,[t("button",{id:"BtnModal",onClick:ue},"Оформить заказ"),b.value?(l(),i("div",yt,u(b.value),1)):g("",!0),y.value?(l(),i("div",_t,u(y.value),1)):g("",!0),M.value?(l(),i("div",xt,u(M.value),1)):g("",!0),w.value?(l(),i("div",bt,u(w.value),1)):g("",!0)])],512)])):g("",!0)])),t("div",wt,[t("div",Ct,[t("div",kt,[(l(!0),i(I,null,E(Q.value,(o,n)=>(l(),i("div",{class:"Сategory",key:n,onClick:d=>se(o._id,o["categories-name"])},[t("a",Bt,u(o["categories-name"]),1)],8,It))),128))])])]),t("div",Pt,[t("div",$t,[(l(!0),i(I,null,E(C.value,o=>(l(),i("div",{key:o,class:G(["page",{active:r.value===o-1}])},[t("div",Mt,[(l(!0),i(I,null,E(oe(o-1),(n,d)=>(l(),i("div",{class:"item",key:d},[t("div",St,[Pe(a,{to:`/product/${n._id}`},{default:$e(()=>[t("img",{src:n["product-image"],style:{width:"100%",height:"100%"}},null,8,Nt)]),_:2},1032,["to"])]),t("div",Tt,u(n["product-name"]),1),t("div",At,[K(u(P(n["product-price"]))+"р",1),e[20]||(e[20]=t("p",{class:"quantity"},"/1шт",-1))]),t("div",Et,[t("button",{class:"ProductBtn",onClick:Z=>ne(n)},"Добавить в корзину",8,Ft)])]))),128))])],2))),128))]),t("div",Lt,[t("button",{class:"nav-btn prev",onClick:e[7]||(e[7]=o=>R("prev"))},"<"),t("input",{class:"page-input",type:"number",value:r.value+1,onInput:O,onKeyup:Be(O,["enter"]),min:"1",max:C.value},null,40,qt),t("button",{class:"nav-btn next",onClick:e[8]||(e[8]=o=>R("next"))},">")])]),e[26]||(e[26]=Y('<div class="AboutUsBody" id="section2"><div class="AboutUsOllContent"><div class="AboutUsContent"><div class="AboutUsOllText"><div class="AboutUsTitle"><h1>О компании</h1></div><div class="AboutUsText"><h2>Мы занимаемся поставками расходных материалов для ремонта в автосалоны, автосервисы, автотранспортные предприятия так, чтобы Вы о них не думали. С радостью возьмем на себя ненужную вам рутину по поиску и доставке материалов для ремонта по самым выгодным ценам. Для нас важно, чтобы с нами вы заработали больше!</h2></div></div><div class="AboutUsLogoContent"><div class="AboutUsLogo"><img class="AboutUsImage" src="'+H+'"></div></div></div></div></div>',1)),e[27]||(e[27]=t("div",{class:"YandexMapBody",id:"section3"},[t("div",{class:"YandexMapContent"},[t("div",{style:{position:"relative",overflow:"hidden"}},[t("a",{href:"https://yandex.ru/maps/35/krasnodar/?utm_medium=mapframe&utm_source=maps",style:{color:"#eee","font-size":"12px",position:"absolute",top:"0px"}},"Краснодар"),t("a",{href:"https://yandex.ru/maps/35/krasnodar/house/magistralnaya_ulitsa_11k3/Z0AYdgBgQEYOQFpvfXxyc3pqZw==/services/?ll=39.071508%2C45.032397&tab=services&utm_medium=mapframe&utm_source=maps&z=19.4",style:{color:"#eee","font-size":"12px",position:"absolute",top:"14px"}},"Магистральная улица, 11к3 — Яндекс Карты"),t("iframe",{class:"YandexMap",src:"https://yandex.ru/map-widget/v1/?ll=39.071508%2C45.032397&mode=whatshere&tab=services&whatshere%5Bpoint%5D=39.070931%2C45.032465&whatshere%5Bzoom%5D=17&z=19.4",width:"800",height:"450",frameborder:"1",allowfullscreen:"true",style:{position:"relative"}})])])],-1)),e[28]||(e[28]=Y('<div class="FooterBody"><div class="FooterBodyContent"><div class="FooterContacts"><h2 class="FooterTitle">Краснодар:</h2><div class="FooterTextContent"><p class="FooterText">+7(928)660-97-79</p><p class="FooterText">+7(928)227-55-15</p><p class="FooterText">+7(967)660-09-51</p><p class="FooterText">+7(967)660-09-47</p><p class="FooterText gmail">info@himautopro.ru</p></div></div><div class="FooterSocial"><div class="FooterSocialContent"><div class="Social"><img src="'+Me+'" style="width:45px;"><img src="'+Se+'" style="width:45px;"></div></div></div></div></div>',1))],64)}}});export{Vt as default};
