import{_ as x}from"./VLZ1h-JR.js";import{_ as y}from"./DdWjvP4_.js";import{_ as F,a as w}from"./Btekxe-z.js";import{g as B,n as k,j as I,r,p as C,c,a as o,H as S,b as T,w as b,t as n,F as D,x as N,o as d}from"./CtCbi2K0.js";import{a as R}from"./BtuGy7By.js";import"./BbCOxZKf.js";import"./_d1bhYXs.js";const j={class:"GoBackBody"},U={class:"PageProductBody"},V={class:"PageProductContent"},$={class:"PageImageProduct"},A=["src"],E={key:1,style:{width:"100%",height:"100%","object-fit":"cover"},src:y},G={class:"PageProductRightBlock"},L={class:"PageProductText"},M={class:"PageProductName"},O={class:"PagePriceForOne"},q={class:"PageProductDescriptionBlock"},H={class:"PageProductDescription"},tt=B({__name:"[id]",setup(z){const p=e=>new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(e).replace(/\s/g,"."),m=k(),g=N(),v=m.params.id,{public:{apiBaseUrl:l}}=I(),s=r(null),a=r(""),i=r(0),u=r(""),_=async()=>{try{const e=await fetch(`${l}/api/products/${v}`);if(!e.ok)throw new Error("Ошибка при получении товара");const t=await e.json();a.value=t["product-name"],i.value=t["product-price"],u.value=t["product-description"],s.value=t["product-image"]}catch(e){console.error("Ошибка при загрузке данных товара:",e),await g.push("/")}},P=async()=>{const e=h();if(!a.value||!i.value||!s.value){console.error("Данные о товаре не загружены");return}try{await R.post(`${l}/api/baskets/add`,{userId:e,"items-product-name":a.value,"items-price":i.value,"items-product-image":s.value,"items-quantity":1}),console.log("Товар добавлен в корзину:",a.value)}catch(t){console.error("Ошибка при добавлении товара в корзину:",t)}},h=()=>{let e=localStorage.getItem("userId");return e||(e=Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("userId",e)),e};return C(()=>{_()}),r("500мл"),(e,t)=>{const f=x;return d(),c(D,null,[t[1]||(t[1]=o("meta",{charset:"utf-8"},null,-1)),t[2]||(t[2]=o("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1)),t[3]||(t[3]=o("title",null,"Авто-химия",-1)),t[4]||(t[4]=o("link",{rel:"icon",href:"~/assets/image/IcoL.ico",type:"image/x-icon"},null,-1)),o("div",j,[T(f,{to:"/"},{default:b(()=>t[0]||(t[0]=[o("a",{class:"BtnGoBack"},"<- назад",-1)])),_:1})]),o("div",U,[o("div",V,[o("div",$,[s.value?(d(),c("img",{key:0,style:{width:"100%",height:"100%","object-fit":"cover"},src:s.value},null,8,A)):(d(),c("img",E))]),o("div",G,[o("div",L,[o("div",M,n(a.value),1),o("div",O,n(p(i.value))+" р/1шт",1),o("div",{class:"PageButtonProductAdd"},[o("button",{class:"PageBtnProductAdd",onClick:P},"Добавить в корзину")])]),o("div",q,[o("div",H,n(u.value),1)])])])]),t[5]||(t[5]=S('<div class="PageFooterBody"><div class="PageFooterBodyContent"><div class="PageFooterContacts"><h2 class="FooterTitle">Краснодар:</h2><div class="PageFooterTextContent"><p class="FooterText">+7(928)660-97-79</p><p class="FooterText">+7(928)227-55-15</p><p class="FooterText">+7(967)660-09-51</p><p class="FooterText">+7(967)660-09-47</p><p class="FooterText gmail">info@himautopro.ru</p></div></div><div class="PageFooterSocial"><div class="PageFooterSocialContent"><div class="PageSocial"><img src="'+F+'" style="width:45px;"><img src="'+w+'" style="width:45px;"></div></div></div></div></div>',1))],64)}}});export{tt as default};
