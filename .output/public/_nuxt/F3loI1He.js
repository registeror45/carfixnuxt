import{_ as Ce}from"./VLZ1h-JR.js";import{g as ke,r as c,j as $e,A as U,p as $,B as X,z as Y,c as i,a as t,l as f,G as Ie,H as K,k as z,d as H,t as u,F as I,s as F,E as G,T as Be,C as Pe,o as l,b as Me,w as Se}from"./CtCbi2K0.js";import{_ as Ne,a as Te}from"./Btekxe-z.js";import{a as m}from"./BtuGy7By.js";import"./BbCOxZKf.js";import"./_d1bhYXs.js";const J=""+new URL("Logo.Dwb7m5aS.jpg",import.meta.url).href,Ae=""+new URL("MainPageImage.DLVszyRh.jpg",import.meta.url).href,Ee=""+new URL("scrol.SYC4ZCKH.png",import.meta.url).href,Fe=""+new URL("CancerImage.SRmK37aL.png",import.meta.url).href,Le={clas:"Navbar"},qe={class:"Container"},Ue={class:"Navbar-Menu"},ze={class:"MainPageInfoBody"},De={class:"MainPageInfoScrol"},Oe={class:"MainPageInfo"},Re={class:"DivInfoButton"},We={key:0,class:"CancerBody",style:{transition:"opacity 0.3s ease"}},Qe={class:"Cancer"},Ve={key:0,id:"orderSuccessModal",class:"modal-success"},Ze={class:"modal-success-content"},je={class:"modal-success-OrderNumber"},Xe={class:"modal-success-ButtonModal"},Ye={key:1,id:"modal",class:"modal"},Ke={class:"SliderModal"},He={class:"SlidesModal"},Ge={class:"PageModal ActiveModal"},Je={class:"ContainerModal"},et={class:"ProductImageModal"},tt=["src"],st={class:"InfoProductModal"},ot={class:"ProductNameModal"},at={class:"ProductOneOrderModalBox"},nt={class:"hsixstyle"},lt={class:"QuantityProductModal"},rt=["onClick"],it=["id","value","onInput"],ct=["onClick"],dt={class:"ProductSumPrice"},ut={id:"hfivestyle"},vt={class:"DeliteProductModal"},mt=["onClick"],pt={class:"ContactsModal"},gt={class:"NameBox"},ht={class:"EmailBox"},ft={class:"NumberBox"},yt={class:"TotalPrice"},_t={class:"ButtonModal"},xt={key:0,class:"error-message"},bt={key:1,class:"error-message-main"},wt={key:2,class:"error-message-main"},Ct={key:3,class:"error-message-main"},kt={class:"CategoriesBody"},$t={class:"CategoriesCenter"},It={class:"Categories",id:"section1"},Bt=["onClick"],Pt={style:{"text-decoration":"none",color:"black"}},Mt={class:"slider"},St={class:"slides"},Nt={class:"container"},Tt={class:"ProductPreview"},At=["src"],Et={class:"ProductName"},Ft={class:"Price"},Lt={class:"ProductButton"},qt=["onClick"],Ut={class:"navigation"},zt=["value","max"],jt=ke({__name:"index",setup(Dt){const B=c(!1),P=s=>new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(s).replace(/\s/g,"."),{public:{apiBaseUrl:v}}=$e(),M=c(!0),w=c(null),g=c(null),r=c(0),p=c(15),y=c([]),ee=c(null),_=c(null),x=c([]),L=c(!1),D=c(null),S=c(null),C=c(null),q=()=>{const s=window.innerWidth;s<=1023?p.value=6:s<=1279?p.value=9:s<=1539?p.value=12:p.value=15},te=s=>s.replace(/\D/g,"").length!==11?(S.value="Не допустимый формат номера телефона",!1):(S.value=null,!0);U(w,s=>{g.value&&(s?g.value.classList.add("with-error"):g.value.classList.remove("with-error"))}),U(_,s=>{g.value&&(s?g.value.classList.add("with-error"):g.value.classList.remove("with-error"))});const O=async()=>{try{console.log("Отправляем запрос по URL:",`${v}/api/products`);const s=await m.get(`${v}/api/products`);y.value=s.data,console.log("Все товары загружены:",y.value),N(),h()}catch(s){console.error("Ошибка при загрузке всех товаров:",s)}},b=()=>{let s=localStorage.getItem("userId");return s||(s=Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("userId",s)),s},se=async s=>{try{console.log("Запрашиваемые данные по категории:",s);const e=`${v}/api/products/category/${s}`;console.log("Запрос по URL:",e);const a=await m.get(e);y.value=a.data,console.log("Товары загружены по категории:",y.value),N()}catch(e){console.error("Ошибка при загрузке товаров по категории:",e)}N(),h()},oe=(s,e)=>{if(!s){console.error("categoryId не передан");return}ee.value=s,r.value=0,e==="Все"?O():se(s),h()};$(()=>{O()});const k=X(()=>Math.ceil(y.value.length/p.value)),ae=s=>{const e=s*p.value,a=e+p.value;return y.value.slice(e,a)},h=()=>{const s=document.querySelector(".slides"),e=document.querySelectorAll(".page");if(e.length>0){const a=e[0].clientWidth;s.style.transform=`translateX(-${r.value*a}px)`}N(),ne()},N=()=>{const s=document.querySelector(".nav-btn.prev"),e=document.querySelector(".nav-btn.next");s&&e&&(r.value===0?(s.disabled=!0,s.style.backgroundColor="gray"):(s.disabled=!1,s.style.backgroundColor="red"),r.value===k.value-1?(e.disabled=!0,e.style.backgroundColor="gray"):(e.disabled=!1,e.style.backgroundColor="red"))},ne=()=>{const s=document.querySelector(".page-input");s&&(s.value=(r.value+1).toString(),s.style.backgroundColor="")},R=()=>{const s=document.querySelector(".page-input");if(s){const e=parseInt(s.value,10)-1;if(e>=0&&e<k.value){const a=document.querySelector(".slides"),n=document.querySelectorAll(".page")[0].clientWidth,d=Math.abs(r.value-e),j=Math.min(.5+d*.2,3);a.style.transition=`transform ${j}s ease-in-out`,r.value=e,a.style.transform=`translateX(-${r.value*n}px)`,h()}else s.style.backgroundColor="#ffcccc"}},W=()=>{const s=document.querySelector(".slides"),a=document.querySelectorAll(".page")[0].clientWidth;s.style.transition="none",s.style.transform=`translateX(-${r.value*a}px)`,setTimeout(()=>{s.style.transition=""},0)},Q=s=>{const e=document.querySelector(".slides"),o=document.querySelectorAll(".page")[0].clientWidth;s==="prev"&&r.value>0?r.value-=1:s==="next"&&r.value<k.value-1&&(r.value+=1),e.style.transform=`translateX(-${r.value*o}px)`,h()};$(()=>{q(),window.addEventListener("resize",q)}),Y(()=>{window.removeEventListener("resize",q)}),U(p,()=>{h()}),$(()=>{h(),window.addEventListener("resize",W)}),Y(()=>{window.removeEventListener("resize",W)});const le=async s=>{const e=b();try{await m.post(`${v}/api/baskets/add`,{userId:e,"items-product-name":s["product-name"],"items-quantity":1,"items-price":s["product-price"],"items-product-image":s["product-image"]}),T()}catch(a){console.error("Ошибка при добавлении товара в корзину:",a)}},T=async()=>{const s=b();try{const e=await m.get(`${v}/api/baskets/${s}`);x.value=e.data.items}catch(e){console.error("Ошибка при получении корзины:",e)}};$(()=>{T()});const A=async(s,e)=>{e<1&&(e=1);const a=b();try{await m.put(`${v}/api/baskets/update`,{userId:a,"items-product-name":s,"items-quantity":e}),T()}catch(o){console.error("Ошибка при обновлении количества товара:",o)}},re=async(s,e)=>{const a=e.target,o=parseInt(a.value,10);if(isNaN(o)||o<1){a.value="1",await A(s,1);return}await A(s,o)},ie=async s=>{const e=b();try{await m.delete(`${v}/api/baskets/remove`,{data:{userId:e,"items-product-name":s}}),T()}catch(a){console.error("Ошибка при удалении товара из корзины:",a)}};function E(s){const e=document.getElementById(s);e&&e.scrollIntoView({behavior:"smooth"})}const ce=X(()=>x.value.reduce((s,e)=>s+e["items-price"]*e["items-quantity"],0)),V=c([]),de=async()=>{try{const e=await(await fetch(`${v}/api/categories`)).json();V.value=e}catch(s){console.error("Ошибка при получении категорий:",s)}};$(()=>{de()});const ue=async()=>{const s=b();try{const e=await m.get(`${v}/api/orders?userId=${s}`),o=(Array.isArray(e.data)?e.data:[e.data]).find(n=>n["order-status"]==="Не готов");return o?(C.value=`У вас уже есть активный заказ #${o.orderNumber}!`,!1):(C.value=null,!0)}catch(e){return console.error("Ошибка при проверке активного заказа:",e),C.value="Ошибка при проверке активного заказа",!1}},ve=async()=>{if(!await ue())return;const e=document.getElementById("NameTextBox").value,a=document.getElementById("EmailTextBox").value,o=document.getElementById("NumberTextBox").value;if(!e||!a||!o){w.value="Пожалуйста, заполните все поля",_.value=null;return}if(!Z(a)){_.value="Не допустимый формат электронной почты.";return}if(!te(o))return;const n=b();try{const d=await m.post(`${v}/api/orders`,{userId:n,items:x.value,"order-name":e,"order-gmail":a,"order-phone":o});D.value=d.data.orderNumber,await m.delete(`${v}/api/baskets/${n}`),B.value=!1,x.value=[],L.value=!0}catch(d){console.error("Ошибка при создании заказа:",d),alert("Произошла ошибка при создании заказа")}},Z=s=>{const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,a=["gmail.com","mail.ru","yandex.ru","yahoo.com"];if(!e.test(s))return M.value=!1,!1;const o=s.split("@")[1];return a.includes(o)?(M.value=!0,!0):(M.value=!1,!1)},me=()=>{w.value=null},pe=()=>{_.value=null},ge=s=>{const e=s.target.value;Z(e),pe(),me()},he=s=>{const e=s.target,a=e.value;/^[a-zA-Z0-9@.]*$/.test(a)||(e.value=a.replace(/[^a-zA-Z0-9@.]/g,"")),ge(s)},fe=s=>{const e=s.target,a=e.value;/^[a-zA-Zа-яА-Я\s]*$/.test(a)||(e.value=a.replace(/[^a-zA-Zа-яА-Я\s]/g,""))},ye=s=>{const e=(""+s).replace(/\D/g,"");if(e.startsWith("+")){const o=e.match(/^\+(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);if(o){let n="+";return o[1]&&(n+=` (${o[1]}`),o[2]&&(n+=`) ${o[2]}`),o[3]&&(n+=`-${o[3]}`),o[4]&&(n+=`-${o[4]}`),n}}const a=e.match(/^(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);if(a){let o="+";return a[1]&&(o+=`${a[1]}`),a[2]&&(o+=` (${a[2]}`),a[3]&&(o+=`) ${a[3]}`),a[4]&&(o+=`-${a[4]}`),a[5]&&(o+=`-${a[5]}`),o}return"+"},_e=s=>{const e=s.target,a=ye(e.value);e.value=a},xe=s=>{const e=s.target;e.value.startsWith("+")||(e.value="+")},be=s=>{const e=s.target;e.value==="+"&&(e.value="")},we=s=>{const e=s.target,a=e.value;/^[0-9]*$/.test(a)||(e.value=a.replace(/[^0-9]/g,"")),_e(s)};return(s,e)=>{const a=Ce;return l(),i(I,null,[e[20]||(e[20]=t("meta",{charset:"utf-8"},null,-1)),e[21]||(e[21]=t("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1)),e[22]||(e[22]=t("title",null,"Авто-химия",-1)),e[23]||(e[23]=t("link",{rel:"icon",href:"~/assets/image/IcoL.ico",type:"image/x-icon"},null,-1)),t("nav",Le,[t("div",qe,[e[10]||(e[10]=t("a",{href:"/",class:"Navbar-Logo"},[t("img",{src:J,style:{width:"160px",height:"100px"}})],-1)),t("ul",Ue,[e[9]||(e[9]=t("li",null,[t("a",{href:"/"},"Главная")],-1)),t("li",null,[t("a",{href:"#section1",onClick:e[0]||(e[0]=z(o=>E("section1"),["prevent"]))},"Магазин")]),t("li",null,[t("a",{href:"#section2",onClick:e[1]||(e[1]=z(o=>E("section2"),["prevent"]))},"О компании")]),t("li",null,[t("a",{class:"LastA",href:"#section3",onClick:e[2]||(e[2]=z(o=>E("section3"),["prevent"]))},"Контакты")])])])]),e[24]||(e[24]=t("div",{class:"DivImage"},[t("img",{src:Ae,style:{width:"100%",height:"100%","object-fit":"cover"}}),t("div",{class:"PageInfoFooter"},[t("img",{src:Ee,style:{width:"50px",height:"45px"}})])],-1)),t("div",ze,[t("div",De,[t("div",Oe,[e[11]||(e[11]=t("h1",{class:"NameStore"},"Авто-химия",-1)),e[12]||(e[12]=t("div",{class:"InfoStore"},[t("h2",{class:"InfoStoreText"},[H("Автохимия и расходные материалы для ремонта (очистители, смазки, герметики, ахо, укрывочная продукция, метизы и прочее.) "),t("p",{class:"InfoStoreTextTwo"},"Выкупим неликвид с вашего склада на выгодных условиях")])],-1)),t("div",Re,[t("button",{class:"InfoButton",onClick:e[3]||(e[3]=o=>E("section1"))},"Каталог")])])])]),x.value.length>0?(l(),i("div",We,[t("div",Qe,[t("img",{id:"CancerImage",alt:"",src:Fe,onClick:e[4]||(e[4]=o=>B.value=!0)})])])):f("",!0),(l(),Ie(Be,{to:"body"},[L.value?(l(),i("div",Ve,[t("div",Ze,[e[13]||(e[13]=t("div",{class:"modal-success-ModalTitle"},[t("h1",{class:"modal-success-modaltitle"},"Ваш заказ успешно создан!")],-1)),t("div",je,[t("p",null,"Номер вашего заказа: #"+u(D.value),1)]),t("div",Xe,[t("button",{id:"modal-success-BtnModal",onClick:e[5]||(e[5]=o=>L.value=!1)},"Закрыть")])])])):f("",!0),B.value?(l(),i("div",Ye,[t("div",{class:"modal-content",ref_key:"modalContent",ref:g},[t("span",{class:"close",onClick:e[6]||(e[6]=o=>B.value=!1)},"×"),e[18]||(e[18]=t("div",{class:"ModalTitle"},[t("h1",{class:"modaltitle"},"Ваш заказ:")],-1)),t("div",Ke,[t("div",He,[t("div",Ge,[t("div",Je,[(l(!0),i(I,null,F(x.value,(o,n)=>(l(),i("div",{key:o._id,class:"itemModal"},[t("div",et,[t("img",{src:o["items-product-image"],style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,tt)]),t("div",st,[t("h4",ot,u(o["items-product-name"]),1),t("div",at,[t("h5",nt,u(P(o["items-price"]))+"р/шт",1)]),t("div",lt,[t("button",{onClick:d=>A(o["items-product-name"],o["items-quantity"]-1),class:"BtnsQuantity"},"-",8,rt),t("input",{type:"number",id:`quantity${n}`,class:"quantitystye",value:o["items-quantity"],onInput:d=>re(o["items-product-name"],d),min:"1"},null,40,it),t("button",{onClick:d=>A(o["items-product-name"],o["items-quantity"]+1),class:"BtnsQuantity Plus"},"+",8,ct)])]),t("div",dt,[t("h4",ut,u(P(o["items-price"]*o["items-quantity"]))+"/Руб.",1)]),t("div",vt,[t("button",{onClick:d=>ie(o["items-product-name"]),class:"BtnsDeliteProductModal"},"X",8,mt)])]))),128))])])])]),t("div",pt,[t("div",gt,[e[14]||(e[14]=t("h2",{class:"htwostyle"},"Ваше имя:",-1)),t("input",{id:"NameTextBox",type:"text",placeholder:"",onInput:fe},null,32)]),t("div",ht,[e[15]||(e[15]=t("h2",{class:"htwostyle"},"Ваша почта:",-1)),t("input",{id:"EmailTextBox",type:"text",placeholder:"",onInput:he,class:G({"invalid-email":!M.value})},null,34)]),t("div",ft,[e[16]||(e[16]=t("h2",{class:"htwostyle"},"Ваш телефон:",-1)),t("input",{id:"NumberTextBox",type:"text",placeholder:"+7 (918) 000-00-00",onBlur:be,onInput:we,onFocus:xe},null,32)])]),t("div",yt,[e[17]||(e[17]=t("h3",{class:"SumModal"},"Сумма:",-1)),t("h3",null,u(P(ce.value))+" р",1)]),t("div",_t,[t("button",{id:"BtnModal",onClick:ve},"Оформить заказ"),w.value?(l(),i("div",xt,u(w.value),1)):f("",!0),_.value?(l(),i("div",bt,u(_.value),1)):f("",!0),S.value?(l(),i("div",wt,u(S.value),1)):f("",!0),C.value?(l(),i("div",Ct,u(C.value),1)):f("",!0)])],512)])):f("",!0)])),t("div",kt,[t("div",$t,[t("div",It,[(l(!0),i(I,null,F(V.value,(o,n)=>(l(),i("div",{class:"Сategory",key:n,onClick:d=>oe(o._id,o["categories-name"])},[t("a",Pt,u(o["categories-name"]),1)],8,Bt))),128))])])]),t("div",Mt,[t("div",St,[(l(!0),i(I,null,F(k.value,o=>(l(),i("div",{key:o,class:G(["page",{active:r.value===o-1}])},[t("div",Nt,[(l(!0),i(I,null,F(ae(o-1),(n,d)=>(l(),i("div",{class:"item",key:d},[t("div",Tt,[Me(a,{to:`/product/${n._id}`},{default:Se(()=>[t("img",{src:n["product-image"],style:{width:"100%",height:"100%"}},null,8,At)]),_:2},1032,["to"])]),t("div",Et,u(n["product-name"]),1),t("div",Ft,[H(u(P(n["product-price"]))+"р",1),e[19]||(e[19]=t("p",{class:"quantity"},"/1шт",-1))]),t("div",Lt,[t("button",{class:"ProductBtn",onClick:j=>le(n)},"Добавить в корзину",8,qt)])]))),128))])],2))),128))]),t("div",Ut,[t("button",{class:"nav-btn prev",onClick:e[7]||(e[7]=o=>Q("prev"))},"<"),t("input",{class:"page-input",type:"number",value:r.value+1,onInput:R,onKeyup:Pe(R,["enter"]),min:"1",max:k.value},null,40,zt),t("button",{class:"nav-btn next",onClick:e[8]||(e[8]=o=>Q("next"))},">")])]),e[25]||(e[25]=K('<div class="AboutUsBody" id="section2"><div class="AboutUsOllContent"><div class="AboutUsContent"><div class="AboutUsOllText"><div class="AboutUsTitle"><h1>О компании</h1></div><div class="AboutUsText"><h2>Мы занимаемся поставками расходных материалов для ремонта в автосалоны, автосервисы, автотранспортные предприятия так, чтобы Вы о них не думали. С радостью возьмем на себя ненужную вам рутину по поиску и доставке материалов для ремонта по самым выгодным ценам. Для нас важно, чтобы с нами вы заработали больше!</h2></div></div><div class="AboutUsLogoContent"><div class="AboutUsLogo"><img class="AboutUsImage" src="'+J+'"></div></div></div></div></div>',1)),e[26]||(e[26]=t("div",{class:"YandexMapBody",id:"section3"},[t("div",{class:"YandexMapContent"},[t("div",{style:{position:"relative",overflow:"hidden"}},[t("a",{href:"https://yandex.ru/maps/35/krasnodar/?utm_medium=mapframe&utm_source=maps",style:{color:"#eee","font-size":"12px",position:"absolute",top:"0px"}},"Краснодар"),t("a",{href:"https://yandex.ru/maps/35/krasnodar/house/magistralnaya_ulitsa_11k3/Z0AYdgBgQEYOQFpvfXxyc3pqZw==/services/?ll=39.071508%2C45.032397&tab=services&utm_medium=mapframe&utm_source=maps&z=19.4",style:{color:"#eee","font-size":"12px",position:"absolute",top:"14px"}},"Магистральная улица, 11к3 — Яндекс Карты"),t("iframe",{class:"YandexMap",src:"https://yandex.ru/map-widget/v1/?ll=39.071508%2C45.032397&mode=whatshere&tab=services&whatshere%5Bpoint%5D=39.070931%2C45.032465&whatshere%5Bzoom%5D=17&z=19.4",width:"800",height:"450",frameborder:"1",allowfullscreen:"true",style:{position:"relative"}})])])],-1)),e[27]||(e[27]=K('<div class="FooterBody"><div class="FooterBodyContent"><div class="FooterContacts"><h2 class="FooterTitle">Краснодар:</h2><div class="FooterTextContent"><p class="FooterText">+7(928)660-97-79</p><p class="FooterText">+7(928)227-55-15</p><p class="FooterText">+7(967)660-09-51</p><p class="FooterText">+7(967)660-09-47</p><p class="FooterText gmail">info@himautopro.ru</p></div></div><div class="FooterSocial"><div class="FooterSocialContent"><div class="Social"><img src="'+Ne+'" style="width:45px;"><img src="'+Te+'" style="width:45px;"></div></div></div></div></div>',1))],64)}}});export{jt as default};
